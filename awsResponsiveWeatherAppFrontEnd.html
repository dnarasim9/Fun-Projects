<!DOCTYPE html>
<html lang="en">
<head>
  <title>Weather Forecast</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.14.0/jquery.validate.min.js"></script>    
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.14.0/jquery.validate.js"></script>

  <script src="http://openweathermap.org/js/OWM.OpenLayers.1.3.4.js" ></script>
  <script src="http://openlayers.org/api/OpenLayers.js"> </script>
  <script src='http://connect.facebook.net/en_US/all.js'></script>

    <style>

		@media(max-width:767px){
			.next7DaysVisualWell {
				margin: 5px 0px;
			}
		}
		@media(min-width:768px){
			.next7DaysVisualWell {
				margin: 5px 0px;
			}
		}
		@media(min-width:992px){
			.next7DaysVisualWell {
				margin: 10px 5px;
			}
		}
		@media(min-width:1200px){
			.next7DaysVisualWell {
				margin: 10px 5px;
			}
		}

		.formdiv {
			background: rgba(0,0,0,.3);
			border-color:rgba(220, 220, 220, 0);
			opacity: 1;
			height: block;
		}


		#basicMap {
			height : 437px;
		}

        	#asterisk{
            		color: red;
        	}
        	#label{
            color: white;
        }
        .err{
            color: red;
        }

        #messages{
           color:red;
       	}

       	label.error{
           color: red;
       	}

       	#next24HourTableData{
            text-align: center;
        }

		.nav-tabs > li.active > a {
           background-color: #367DB5 !important;
           color: white;
       	}

    </style>
    <script>


    $(document).ready(function () {

  
            validator=$('#myform').validate({
                rules: {
                    address: {
                       required: true                       
                    },
    
                    city: {
                        required: true                       
                    },

                    state: {
                        required: true
                    }
                },


                messages: {
                    address: {
                        required:"Please enter the street address"
                    },

                    city: {
                        required:"Please enter the city"
                    },

                    state: {
                        required: "Please select a state"
                    }
 
                }
            });
        });


        

        $(function() {


            $("#search").click(function() {                

                var address = $("#address").val();
                var city = $("#city").val();
                var state = $("#state").val();
                var reg=/[^\s]/;

                if(!$("#myform").valid())
                {

                    return false;
                }

            else
                {
                    console.log("Ajax call");
                    $.ajax({
                                    type: 'GET',
                                    url: 'index.php',
                                    dataType: 'json',

					data: {
						street : $("#address").val(),
						city : $("#city").val(),
						state : $("#state").val(),
						degree : $("input[name=degree]:checked").val()
					},

					success: function(output){
						console.log("Success function");
						console.log(output);

                        $('#forecastResultsDiv').show();
						$('#weatherTabs a[href="#rightNow"]').tab('show');

						var rightNowIcon = "";
						switch(output.currently.icon)
						{
                                    case 'clear-day': rightNowIcon="<img src='http://cs-server.usc.edu:45678/hw/hw8/images/clear.png' title='" + output.currently.summary + "' alt='"+ output.currently.summary +"' length='100' width='100'>"; break;
                                    case 'clear-night': rightNowIcon="<img src='http://cs-server.usc.edu:45678/hw/hw8/images/clear_night.png' title='" + output.currently.summary + "' alt='"+ output.currently.summary +"' length='100' width='100'>"; break;
                                    case 'rain': rightNowIcon="<img src='http://cs-server.usc.edu:45678/hw/hw8/images/rain.png' title='" + output.currently.summary + "' alt='"+ output.currently.summary +"' length='100' width='100'>"; break;
                                    case 'snow': rightNowIcon="<img src='http://cs-server.usc.edu:45678/hw/hw8/images/snow.png' title='" + output.currently.summary + "' alt='"+ output.currently.summary +"' length='125' width='125'>"; break;
                                    case 'sleet': rightNowIcon="<img src='http://cs-server.usc.edu:45678/hw/hw8/images/sleet.png' title='" + output.currently.summary + "' alt='"+ output.currently.summary +"' length='125' width='125'>"; break;
                                    case 'wind': rightNowIcon="<img src='http://cs-server.usc.edu:45678/hw/hw8/images/wind.png' title='" + output.currently.summary + "' alt='"+ output.currently.summary +"' length='125' width='125'>"; break;
                                    case 'fog':     rightNowIcon="<img src='http://cs-server.usc.edu:45678/hw/hw8/images/fog.png' title='" + output.currently.summary + "' alt='"+ output.currently.summary +"' length='125' width='125'>"; break;
                                    case 'cloudy': rightNowIcon="<img src='http://cs-server.usc.edu:45678/hw/hw8/images/cloudy.png' title='" + output.currently.summary + "' alt='"+ output.currently.summary +"' length='125' width='125'>"; break;
                                    case 'partly-cloudy-day': rightNowIcon="<img src='http://cs-server.usc.edu:45678/hw/hw8/images/cloud_day.png' title='" + output.currently.summary + "' alt='"+ output.currently.summary +"' length='125' width='125'>"; break;
                                    case 'partly-cloudy-night':     rightNowIcon="<img src='http://cs-server.usc.edu:45678/hw/hw8/images/cloud_night.png' title='" + output.currently.summary + "' alt='"+ output.currently.summary +"' length='125' width='125'>"; break;
                        }

//Test comment

<hr>

